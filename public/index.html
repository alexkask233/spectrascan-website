<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üõ°Ô∏è SpectraScan - Unmask Your Digital Ghost</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <style>
    /* --- CSS Variables --- */
    :root { /* Dark Theme (Default) */
      --bg-color: #121217; --card-color: #1e1e24; --border-color: #33333a; --text-primary: #f0f0f0; --text-secondary: #a9a9b3; --accent-green: #00ff88; --accent-red: #ff4757; --accent-blue: #00aaff; --success-bg: rgba(0, 255, 136, 0.1); --danger-bg: rgba(255, 71, 87, 0.1); --bg-glow-color: rgba(0, 255, 138, 0.05); --bg-grid-color: #2a2a30;
    }
    body.light-mode { /* Light Theme */
      --bg-color: #f4f4f8; --card-color: #ffffff; --border-color: #e0e0e6; --text-primary: #121217; --text-secondary: #66666e; --success-bg: rgba(0, 200, 110, 0.1); --danger-bg: rgba(255, 71, 87, 0.1); --bg-glow-color: rgba(0, 170, 255, 0.04); --bg-grid-color: #dce0e6;
    }

    /* --- Global & Background Styles --- */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background-color: var(--bg-color); color: var(--text-primary); font-family: 'Inter', sans-serif; line-height: 1.6; transition: background-color 0.3s ease; background-image: radial-gradient(circle at center, var(--bg-glow-color) 0%, transparent 40%), repeating-radial-gradient(circle at center, var(--bg-grid-color) 0, var(--bg-grid-color) 1px, transparent 1px, transparent 50px); background-size: 100% 100%, 50px 50px; }
    .page-wrapper { display: flex; flex-direction: column; min-height: 100vh; }
    main { flex-grow: 1; display: flex; justify-content: center; align-items: center; padding: 40px 20px; }
    .page { display: none; width: 100%; max-width: 700px; }
    .page.active { display: block; animation: page-transition-in 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
    @keyframes page-transition-in { from { opacity: 0; transform: translateY(20px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }

    /* --- Header / Navigation --- */
    header { background-color: rgba(30, 30, 36, 0.8); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-bottom: 1px solid var(--border-color); padding: 0 40px; display: flex; justify-content: space-between; align-items: center; height: 70px; position: sticky; top: 0; z-index: 100; transition: background-color 0.3s ease, border-color 0.3s ease; }
    body.light-mode header { background-color: rgba(255, 255, 255, 0.8); }
    .logo-link { text-decoration: none; }
    .logo { font-size: 20px; font-weight: 700; display: flex; align-items: center; gap: 10px; color: var(--text-primary); }
    .logo .fa-shield-halved { color: var(--accent-green); }
    nav { display: flex; align-items: center; gap: 30px; }
    nav .nav-link { color: var(--text-secondary); text-decoration: none; font-weight: 500; transition: color 0.2s ease; }
    nav .nav-link:hover, nav .nav-link.active { color: var(--text-primary); }
    #theme-toggle-btn { background: none; border: none; color: var(--text-secondary); font-size: 20px; cursor: pointer; transition: color 0.2s ease, transform 0.2s ease; }
    #theme-toggle-btn:hover { color: var(--text-primary); transform: scale(1.1); }
    #hamburger-btn, #close-nav-btn { display: none; background: none; border: none; font-size: 24px; color: var(--text-primary); cursor: pointer; }
    #close-nav-btn { position: absolute; top: 20px; right: 20px; }
    
    footer { text-align: center; padding: 20px; color: var(--text-secondary); font-size: 14px; background-color: var(--card-color); border-top: 1px solid var(--border-color); margin-top: auto; transition: background-color 0.3s ease, border-color 0.3s ease; }
    
    .container { background-color: var(--card-color); padding: 30px 40px; border-radius: 16px; border: 1px solid var(--border-color); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); transition: background-color 0.3s ease, border-color 0.3s ease; }
    h1 { font-size: 28px; font-weight: 700; margin-bottom: 10px; text-align: center; color: var(--text-primary); }
    .tagline { color: var(--text-secondary); margin-bottom: 30px; font-size: 16px; text-align: center; }
    button { cursor: pointer; transition: all 0.2s ease; font-family: 'Inter', sans-serif; }
    button#run-btn, button#reset-btn { width: 100%; border: none; border-radius: 10px; font-weight: 700; font-size: 16px; }
    button#run-btn { padding: 15px; background: var(--accent-green); color: #000; }
    button#run-btn:hover { background-color: #00e67a; transform: translateY(-2px); }
    button#reset-btn { padding: 12px; background: var(--border-color); color: var(--text-secondary); margin-top: 20px; }
    button#reset-btn:hover { background: #44444e; color: var(--text-primary); }
    body.light-mode button#reset-btn:hover { background: #d0d0d6; }
    #results-container { margin-top: 30px; text-align: left; }
    .loader-wrapper { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 0; animation: page-transition-in 0.5s; }
    .scanner-circle { width: 60px; height: 60px; border: 4px solid var(--border-color); border-top-color: var(--accent-green); border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .scanner-text { margin-top: 20px; color: var(--text-secondary); font-weight: 500; letter-spacing: 1px; text-transform: uppercase; }
    .fingerprint-header { text-align: center; margin-bottom: 15px; color: var(--text-secondary); font-size: 14px; font-weight: 500; text-transform: uppercase; letter-spacing: 1px; }
    .fingerprint-hash { font-size: 18px; font-weight: 700; color: var(--accent-blue); text-align: center; word-break: break-all; margin-bottom: 25px; padding: 10px; background: var(--bg-color); border-radius: 8px; border: 1px solid var(--border-color); }
    .details-grid { display: grid; grid-template-columns: auto 1fr; gap: 10px 20px; padding-top: 20px; border-top: 1px solid var(--border-color); }
    .details-grid .label { color: var(--text-secondary); font-weight: 500; }
    .details-grid .value { color: var(--text-primary); font-weight: 500; word-break: break-all; }
    .static-page h2 { font-size: 24px; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid var(--border-color); color: var(--text-primary); }
    .static-page p { color: var(--text-secondary); margin-bottom: 20px; }

    @media (max-width: 768px) {
        header { padding: 0 20px; }
        nav .nav-link, nav #theme-toggle-btn { display: none; }
        #hamburger-btn { display: block; }
        nav { position: fixed; top: 0; right: -100%; width: 100%; height: 100vh; background: rgba(18, 18, 23, 0.95); backdrop-filter: blur(10px); flex-direction: column; justify-content: center; align-items: center; gap: 40px; transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
        body.light-mode nav { background: rgba(244, 244, 248, 0.95); }
        nav.is-open { right: 0; }
        nav.is-open .nav-link, nav.is-open #theme-toggle-btn, nav.is-open #close-nav-btn { display: block; font-size: 24px; }
        .container { padding: 20px; }
        h1 { font-size: 24px; }
        .details-grid { grid-template-columns: 1fr; text-align: center; gap: 4px; }
        .details-grid .value { margin-bottom: 16px; }
    }
  </style>
</head>
<body>

<div class="page-wrapper">
  <header>
    <a href="/" class="logo-link">
      <div class="logo">
        <i class="fa-solid fa-shield-halved"></i>
        <span>SpectraScan</span>
      </div>
    </a>
    <button id="hamburger-btn" aria-label="Open menu"><i class="fa-solid fa-bars"></i></button>
    <nav id="main-nav">
        <button id="close-nav-btn" aria-label="Close menu"><i class="fa-solid fa-times"></i></button>
        <a href="/" class="nav-link">Catcher</a>
        <a href="/faq" class="nav-link">FAQ</a>
        <a href="/privacy" class="nav-link">Privacy</a>
        <a href="/contact" class="nav-link">Contact</a>
        <button id="theme-toggle-btn" title="Toggle theme"><i class="fa-solid fa-moon"></i></button>
    </nav>
  </header>
  
  <main>
    <div id="page-catcher" class="page active">
      <div class="container" id="catcher-container">
        <h1>View Your Device Fingerprint</h1>
        <p class="tagline">Analyzing over 10 data points to create a unique ID for your browser.</p>
        <button id="run-btn" onclick="runDetection()">Analyze My Device</button>
        <div id="results-container"></div>
      </div>
    </div>
    
    <div id="page-faq" class="page"><div class="container static-page"><h2>Frequently Asked Questions</h2><p>This page provides answers to common questions.</p></div></div>
    <div id="page-privacy" class="page"><div class="container static-page"><h2>Privacy Policy</h2><p>Our commitment to your privacy.</p></div></div>
    <div id="page-contact" class="page"><div class="container static-page"><h2>Contact Us</h2><p>Get in touch with our team.</p></div></div>
  </main>

  <footer>¬© 2025 SpectraScan. All rights reserved.</footer>
</div>

<script>
  /* --- RESPONSIVE NAVIGATION & THEME --- */
  const hamburgerBtn = document.getElementById('hamburger-btn'); const closeNavBtn = document.getElementById('close-nav-btn'); const mainNav = document.getElementById('main-nav');
  hamburgerBtn.addEventListener('click', () => mainNav.classList.add('is-open'));
  closeNavBtn.addEventListener('click', () => mainNav.classList.remove('is-open'));
  const themeToggleBtn = document.getElementById('theme-toggle-btn'); const body = document.body; const themeIcon = themeToggleBtn.querySelector('i');
  function applySavedTheme() { const savedTheme = localStorage.getItem('theme'); if (savedTheme === 'light') { body.classList.add('light-mode'); themeIcon.classList.remove('fa-moon'); themeIcon.classList.add('fa-sun'); } else { body.classList.remove('light-mode'); themeIcon.classList.remove('fa-sun'); themeIcon.classList.add('fa-moon'); } }
  themeToggleBtn.addEventListener('click', () => { body.classList.toggle('light-mode'); if (body.classList.contains('light-mode')) { localStorage.setItem('theme', 'light'); themeIcon.classList.remove('fa-moon'); themeIcon.classList.add('fa-sun'); } else { localStorage.setItem('theme', 'dark'); themeIcon.classList.remove('fa-sun'); themeIcon.classList.add('fa-moon'); } });

  /* --- SPA ROUTER SCRIPT --- */
  const pageContent = { '/': 'page-catcher', '/faq': 'page-faq', '/privacy': 'page-privacy', '/contact': 'page-contact' };
  function showPageContent(pageId) {
    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
    const pageToShow = document.getElementById(pageId);
    if(pageToShow) pageToShow.classList.add('active');
    document.querySelectorAll('.nav-link').forEach(link => {
      link.classList.remove('active');
      const targetPath = (new URL(link.href)).pathname;
      const currentPath = window.location.pathname;
      if (targetPath === currentPath || (currentPath === '/' && link.getAttribute('href') === '/')) { link.classList.add('active'); }
    });
  }
  const router = () => { const path = window.location.pathname; const pageId = pageContent[path] || 'page-catcher'; showPageContent(pageId); };
  document.addEventListener('click', (e) => {
    const target = e.target.closest('a');
    if (target && (target.matches('.nav-link') || target.matches('.logo-link'))) {
      e.preventDefault();
      history.pushState(null, '', target.href);
      mainNav.classList.remove('is-open'); router();
    }
  });
  window.addEventListener('popstate', router);
  document.addEventListener('DOMContentLoaded', () => { applySavedTheme(); router(); });

  /* ============================================= */
  /* ---      NEW FINGERPRINTING SCRIPT        --- */
  /* ============================================= */

  async function runDetection() {
    const runBtn = document.getElementById('run-btn');
    const resultsEl = document.getElementById('results-container');
    runBtn.style.display = 'none';
    resultsEl.innerHTML = `<div class="loader-wrapper"><div class="scanner-circle"></div><p class="scanner-text">GENERATING FINGERPRINT...</p></div>`;

    // Use a short delay to allow the UI to update before the main thread gets busy
    await new Promise(resolve => setTimeout(resolve, 50));

    const { fingerprint, details } = await getDeviceFingerprint();

    let resultsHTML = `
      <div class="fingerprint-header">Your Device Fingerprint ID</div>
      <div class="fingerprint-hash">${fingerprint}</div>
      <div class="details-grid">
    `;

    for (const [key, value] of Object.entries(details)) {
        // Sanitize value to prevent basic HTML injection
        const sanitizedValue = String(value).replace(/</g, "<").replace(/>/g, ">");
        resultsHTML += `<div class="label">${key}:</div><div class="value">${sanitizedValue}</div>`;
    }

    resultsHTML += `</div><button id="reset-btn" onclick="location.reload()">Run Another Test</button>`;
    
    resultsEl.style.opacity = 0;
    resultsEl.innerHTML = resultsHTML;
    // Simple fade-in animation
    setTimeout(() => { 
        resultsEl.style.transition = 'opacity 0.5s'; 
        resultsEl.style.opacity = 1;
    }, 100);
  }

  // --- HASHING FUNCTION (SHA-256) ---
  async function sha256(message) {
      const msgBuffer = new TextEncoder().encode(message);
      const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
      return hashHex;
  }

  // --- DATA COLLECTION HELPERS ---

  function getSimpleCanvasHash() {
      try {
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');
          ctx.textBaseline = "top";
          ctx.font = "14px 'Arial'";
          ctx.fillStyle = "rgb(255,0,255)";
          ctx.fillRect(125,1,62,20);
          ctx.fillStyle = "#000000";
          ctx.fillText("SpectraScan Fingerprint. üõ°Ô∏è", 2, 15);
          ctx.fillStyle = "rgba(102, 204, 0, 0.7)";
          ctx.fillText("SpectraScan Fingerprint. üõ°Ô∏è", 4, 17);
          return canvas.toDataURL();
      } catch {
          return "unavailable";
      }
  }

  function getWebGLInfo() {
      try {
          const canvas = document.createElement('canvas');
          const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
          const dbg = gl.getExtension('WEBGL_debug_renderer_info');
          return {
              vendor: gl.getParameter(dbg.UNMASKED_VENDOR_WEBGL),
              renderer: gl.getParameter(dbg.UNMASKED_RENDERER_WEBGL)
          };
      } catch {
          return { vendor: "unknown", renderer: "unknown" };
      }
  }

  function getFontsFingerprint() {
      const baseFonts = ['monospace', 'sans-serif', 'serif'];
      const testString = "mmmmmmmmmmlli";
      const testSize = '72px';
      const h = document.body;
      const s = document.createElement("span");
      s.style.fontSize = testSize;
      s.innerHTML = testString;
      const defaultWidth = {};
      const defaultHeight = {};
      for (let i = 0; i < baseFonts.length; i++) {
          s.style.fontFamily = baseFonts[i];
          h.appendChild(s);
          defaultWidth[baseFonts[i]] = s.offsetWidth;
        defaultHeight[baseFonts[i]] = s.offsetHeight;
          h.removeChild(s);
      }
      
      const fontList = ['Arial', 'Verdana', 'Helvetica', 'Times New Roman', 'Courier New', 'Georgia', 'Palatino', 'Garamond', 'Bookman', 'Comic Sans MS', 'Trebuchet MS', 'Arial Black', 'Impact'];
      let availableFonts = '';
      for (let i = 0; i < fontList.length; i++) {
          let detected = false;
          for (let j = 0; j < baseFonts.length; j++) {
              s.style.fontFamily = fontList[i] + ',' + baseFonts[j];
              h.appendChild(s);
              const matched = (s.offsetWidth !== defaultWidth[baseFonts[j]] || s.offsetHeight !== defaultHeight[baseFonts[j]]);
              h.removeChild(s);
              detected = detected || matched;
          }
          if(detected) { availableFonts += fontList[i] + ','; }
      }
      return availableFonts;
  }

  // --- MAIN FINGERPRINTING FUNCTION ---
  async function getDeviceFingerprint() {
    const gl = getWebGLInfo();

    // Collect all data points
    const details = {
      "User Agent": navigator.userAgent,
      "Platform": navigator.platform,
      "Languages": navigator.languages ? navigator.languages.join(', ') : navigator.language,
      "Screen Resolution": `${screen.width}x${screen.height}x${screen.colorDepth}`,
      "Timezone": Intl.DateTimeFormat().resolvedOptions().timeZone,
      "Session Storage": !!window.sessionStorage,
      "Local Storage": !!window.localStorage,
      "Cookies Enabled": navigator.cookieEnabled,
      "CPU Cores": navigator.hardwareConcurrency || 'N/A',
      "WebGL Vendor": gl.vendor,
      "WebGL Renderer": gl.renderer,
      "Fonts": getFontsFingerprint()
    };
    
    // Add canvas hash last as it's asynchronous
    const canvasData = getSimpleCanvasHash();

    // Combine all components into a single string for hashing
    const componentString = Object.values(details).join('||') + '||' + canvasData;
    const fingerprint = await sha256(componentString);

    // Now add the canvas hash to the details to display it
    details["Canvas Hash"] = await sha256(canvasData);

    return { fingerprint, details };
  }
</script>

</body>
</html>